<!-- 引導觀看案例彈窗 -->
<div 
  x-data="{ popupOpen: false }" 
  x-init="setTimeout(() => popupOpen = true, 1000)" 
  class="hidden fixed inset-0 flex items-center justify-center z-[999]"
  x-show="popupOpen"
  style="display: none;"
  x-transition.opacity
>
  <div class="absolute inset-0 bg-black bg-opacity-50" @click="popupOpen = false"></div>
  
  <div class="relative bg-white p-6 rounded-lg shadow-xl w-11/12 md:w-1/2 text-left">
    <!-- 關閉按鈕 -->
    <button 
      @click="popupOpen = false" 
      class="absolute top-2 right-2 text-gray-400 hover:text-gray-700 transition"
    >
      ✖
    </button>

    <!-- 內容 -->
    <h2 class="text-2xl font-bold mb-4 text-[#2C5F64]">已成功協助上百位客戶順利取得資金</h2>
    <p class="text-gray-600 mb-4">
      我們以豐富的實務經驗，協助不同條件的客戶完成資金規劃與貸款申請，無論財務情況多麼複雜，我們都能提供合適的解決方案。
    </p>
    <p class="text-gray-600 mb-4">
      如您有任何資金需求或想了解更多案例，歡迎點擊<strong class="text-[#2C5F64]">右下角的 LINE 按鈕</strong>與我們即時聯繫，專人免費為您說明。
    </p>
    
    <!-- 按鈕區 -->
    <div class="mt-6 flex justify-start space-x-4">
      <!-- 改為 JS 滾動，不更改網址 -->
      <button 
          id="popup_case_button"
          data-gtm="popup_case_button"
          @click="popupOpen = false; document.getElementById('cases').scrollIntoView({ behavior: 'smooth' })"
          class="bg-[#2C5F64] text-white px-4 py-2 rounded-lg"
          >
          查看成功案例
      </button>

      <!-- 稍後再說 -->
      <button 
        @click="popupOpen = false" 
        class="border border-gray-300 text-gray-600 px-4 py-2 rounded-lg"
      >
        稍後再說
      </button>
    </div>
  </div>
</div>


<div 
  x-data="{
    popupOpen: false,
    hasInteracted: false,
    showPopup() {
      if (!this.hasInteracted) this.popupOpen = true;
    },
    closePopup() {
      this.popupOpen = false;
      setTimeout(() => this.showPopup(), 40000);
    }
  }"
  x-init="setTimeout(() => showPopup(), 1000)"
  class="fixed inset-0 flex items-center justify-center z-[999]"
  x-show="popupOpen"
  style="display: none;"
  x-transition.opacity
>
  <!-- 背景遮罩 -->
  <div class="absolute inset-0 bg-black bg-opacity-50" @click="closePopup()"></div>

  <!-- 彈窗主體 -->
  <div class="relative bg-white p-6 rounded-lg shadow-xl w-11/12 md:w-1/2 text-left">

    <!-- 關閉按鈕 -->
    <button 
      @click="closePopup()" 
      class="absolute top-2 right-2 text-gray-400 hover:text-gray-700 transition"
    >✖</button>

    <!-- 內容 -->
    <h2 class="text-3xl font-bold mb-4 text-[#2C5F64]">專人免費諮詢</h2>
    <p class="text-gray-700 text-lg mb-4 leading-relaxed">
      想了解貸款條件與方案？<br class="md:hidden">
      留下資料將有專人與您聯繫，提供免費專業評估。
    </p>

    <!-- CTA 按鈕區 -->
    <div class="mt-6 flex flex-col md:flex-row justify-start items-stretch md:items-center space-y-3 md:space-y-0 md:space-x-4">

    <!-- 立即諮詢 -->
    <button 
    @click="popupOpen = false; hasInteracted = true; window.location.href='https://lin.ee/zPhiUUg';" 
    class="bg-[#2C5F64] hover:bg-[#24494e] text-white text-lg px-6 py-3 rounded-lg font-semibold w-full md:w-auto"
    >
    立即諮詢
    </button>


      <!-- 查看成功案例（不再顯示第二次） -->
      <button 
        @click="popupOpen = false; hasInteracted = true; document.getElementById('cases').scrollIntoView({ behavior: 'smooth' })" 
        class="bg-[#06C755] hover:bg-[#04a94e] text-white text-lg px-6 py-3 rounded-lg font-semibold w-full md:w-auto"
      >
        查看成功案例
      </button>

      <!-- 稍後再說（40 秒後再彈一次） -->
      <button 
        @click="closePopup()" 
        class="bg-[#E2E8F0] hover:bg-gray-300 text-gray-700 text-lg px-6 py-3 rounded-lg font-semibold w-full md:w-auto"
      >
        稍後再說
      </button>
    </div>
  </div>
</div>
